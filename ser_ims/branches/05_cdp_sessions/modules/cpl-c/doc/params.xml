<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN" 
   "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd">

<section id="cpl-c.parameters" xmlns:xi="http://www.w3.org/2001/XInclude">
    <sectioninfo>
	<revhistory>
	    <revision>
		<revnumber>$Revision$</revnumber>
		<date>$Date$</date>
	    </revision>
	</revhistory>
    </sectioninfo>

    <title>Parameters</title>

    <section id="cpl_db">
	<title><varname>cpl_db</varname> (string)</title>
	<para>
	    A SQL URL have to be given to the module for knowing where the 
	    database containing the table with CPL scripts is locates. If 
	    required a user name and password can be specified for allowing 
	    the module to connect to the database server.
	</para>
	<warning>
	    <para>
		This parameter is mandatory.
	    </para>
	</warning>
	<example>
	    <title>Set <varname>cpl_db</varname> parameter</title>
	    <programlisting>
...
modparam("cpl_c","cpl_db","mysql://user:passwd@host/database")
...
	    </programlisting>
	</example>
    </section>

    <section id="cpl_table">
	<title><varname>cpl_table</varname> (string)</title>
	<para>
	    Indicates the name of the table that store the CPL scripts. 
	    This table must be locate into the database specified by 
	    "cpl_db" parameter. For more about the format of the CPL table 
	    please see <filename>modules/cpl-c/init.mysql</filename>.
	</para>
	<warning>
	    <para>
		This parameter is mandatory.
	    </para>
	</warning>
	<example>
	    <title>Set <varname>cpl_table</varname> parameter</title>
	    <programlisting>
...
modparam("cpl_c","cpl_table","cpltable")
...
	    </programlisting>
	</example>
    </section>

    <section id="cpl_dtd_file">
	<title><varname>cpl_dtd_file</varname> (string)</title>
	<para>
	    Points to the DTD file describing the CPL grammar. The file 
	    name may include also the path to the file. This path can be 
	    absolute or relative (be careful the the path will be relative 
	    to the starting directory of SER).
	</para>
	<warning>
	    <para>
		This parameter is mandatory.
	    </para>
	</warning>
	<example>
	    <title>Set <varname>cpl_dtd_file</varname> parameter</title>
	    <programlisting>
...
modparam("cpl_c","cpl_dtd_file","/etc/ser/cpl-06.dtd")
...
	    </programlisting>
	</example>
    </section>
    
    <section id="log_dir">
	<title><varname>log_dir</varname> (string)</title>
	<para>
	    Points to a directory where should be created all the log file 
	    generated by the LOG CPL node. A log file per user will be 
	    created (on demand) having the name username.log.
	</para>
	<note>
	    <para>
		If this parameter is absent, the logging will be disabled 
		without generating error on execution.
	    </para>
	</note>
	<example>
	    <title>Set <varname>log_dir</varname> parameter</title>
	    <programlisting>
...
modparam("cpl_c","log_dir","/var/log/ser/cpl")
...
	    </programlisting>
	</example>
    </section>

    <section id="proxy_recurse">
	<title><varname>proxy_recurse</varname> (int)</title>
	<para>
	    Tells for how many time is allow to have recurse for PROXY CPL 
	    node If it has value 2, when doing proxy, only twice the proxy 
	    action will be re-triggered by  a redirect response; the third 
	    time, the proxy execution will end by going on REDIRECTION 
	    branch. The recurse feature can be disable by setting this 
	    parameter to 0 
	</para>
	<para>
	    Default value of this parameter is 0.
	</para>
	<example>
	    <title>Set <varname>proxy_recurse</varname> parameter</title>
	    <programlisting>
...
modparam("cpl_c","proxy_recurse",2)
...
	    </programlisting>
	</example>
    </section>

    <section id="proxy_route">
	<title><varname>proxy_route</varname> (int)</title>
	<para>
	    Before doing proxy (forward), a script route can be executed.
	    All modifications made by that route will be reflected only for
	    the current branch.
	</para>
	<para>
	    Default value of this parameter is 0 (none).
	</para>
	<example>
	    <title>Set <varname>proxy_route</varname> parameter</title>
	    <programlisting>
...
modparam("cpl_c","proxy_route",1)
...
	    </programlisting>
	</example>
    </section>

    <section id="nat_flag">
	<title><varname>nat_flag</varname> (int)</title>
	<para>
	    Sets the flag used for marking calls via NAT. Used by lookup
	    tag when retrieving a contact behind a NAT (this flag will be 
	    set).
	</para>
	<para>
	    Default value of this parameter is 6.
	</para>
	<example>
	    <title>Set <varname>nat_flag</varname> parameter</title>
	    <programlisting>
...
modparam("cpl_c","nat_flag",4)
...
	    </programlisting>
	</example>
    </section>

    <section id="lookup_domain">
	<title><varname>lookup_domain</varname> (int)</title>
	<para>
	    Tells if the lookup tag should use or not the domain part when
	    doing user location search. Set it to a non zero value to force
	    also domain matching.
	</para>
	<para>
	    Default value of this parameter is 0.
	</para>
	<example>
	    <title>Set <varname>lookup_domain</varname> parameter</title>
	    <programlisting>
...
modparam("cpl_c","lookup_domain",1)
...
	    </programlisting>
	</example>
    </section>

</section>
